<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>VALK UAV — Middleton Makes</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --bg:#0b0d10; --card:#14181d; --text:#e6e8eb;
      --muted:#98a2b3; --accent:#5bd1ff; --chip:#21262d;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      background:var(--bg);color:var(--text);
      font:16px/1.6 system-ui,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial;
    }
    a{color:var(--accent);text-decoration:none}
    a:hover{text-decoration:underline}
    .topnav{
      position:sticky;top:0;
      backdrop-filter:saturate(120%) blur(6px);
      background:rgba(11,13,16,.85);
      border-bottom:1px solid #1f2329;
      display:flex;align-items:center;justify-content:space-between;
      padding:12px 24px;z-index:10;
    }
    .brand{font-weight:700;letter-spacing:.3px}
    .links a{margin-left:16px;opacity:.9}
    .links a.active{border-bottom:2px solid var(--accent)}
    .container{max-width:900px;margin:0 auto;padding:24px}
    h1{font-size:30px;margin-bottom:4px}
    .subtitle{color:var(--muted);margin-bottom:18px}
    .hero-media{margin:12px 0 20px;border-radius:14px;overflow:hidden;border:1px solid #1f2329}
    .hero-media img{width:100%;display:block;object-fit:cover;max-height:420px}
    .hero-media iframe{width:100%;aspect-ratio:16/9;border:0;display:block}
    .section-title{margin-top:24px;font-size:20px;margin-bottom:6px}
    .muted{color:var(--muted)}
    ul{margin:8px 0 12px 18px}

    /* --- Carousel --- */
    .carousel{
      margin-top:16px;
      border-radius:12px;
      border:1px solid #1f2329;
      overflow:hidden;
      position:relative;
      background:var(--card);
    }
    .carousel-track{
      display:flex;
      transition:transform 0.4s ease;
      will-change:transform;
    }
    .carousel-slide{
      min-width:100%;
    }
    .carousel-slide img{
      width:100%;
      display:block;
      object-fit:cover;
      max-height:260px;
      cursor:pointer;
    }
    .carousel-btn{
      position:absolute;
      top:50%;
      transform:translateY(-50%);
      background:rgba(0,0,0,0.45);
      border:none;
      color:#fff;
      padding:6px 10px;
      border-radius:8px;
      cursor:pointer;
      font-size:20px;
      z-index:5;
      transition:background 0.15s;
    }
    .carousel-btn:hover{
      background:rgba(0,0,0,0.7);
    }
    .carousel-btn.prev{left:8px;}
    .carousel-btn.next{right:8px;}
    .carousel-dots{
      display:flex;
      justify-content:center;
      gap:8px;
      padding:8px 0 4px;
    }
    .carousel-dot{
      width:8px;
      height:8px;
      border-radius:50%;
      background:var(--muted);
      cursor:pointer;
      transition:background 0.15s, transform 0.15s;
    }
    .carousel-dot.active{
      background:var(--accent);
      transform:scale(1.15);
    }

    /* --- Lightbox --- */
    .lightbox{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,0.85);
      display:none;
      align-items:center;
      justify-content:center;
      z-index:100;
      padding:16px;
    }
    .lightbox.open{
      display:flex;
    }
    .lightbox img{
      max-width:95vw;
      max-height:95vh;
      border-radius:12px;
      border:1px solid #1f2329;
      box-shadow:0 18px 45px rgba(0,0,0,0.7);
    }
    .lightbox-hint{
      position:fixed;
      bottom:12px;
      left:50%;
      transform:translateX(-50%);
      color:#ccc;
      font-size:12px;
      opacity:0.8;
    }

    .footer{
      border-top:1px solid #1f2329;
      padding:24px;text-align:center;color:var(--muted);
      margin-top:32px;
    }
    @media (max-width:600px){
      .container{padding:16px}
      h1{font-size:24px}
      .carousel-slide img{max-height:220px;}
    }
  </style>
</head>
<body>
  <nav class="topnav">
    <a class="brand" href="/">Middleton Makes</a>
    <div class="links">
      <a href="/#uav">UAV Projects</a>
      <a href="/#builds">Builds & Experiments</a>
      <a href="/#about">About</a>
      <a href="/#contact">Contact</a>
    </div>
  </nav>

  <main class="container">
    <header>
      <h1>VALK UAV</h1>
      <p class="subtitle">Long-endurance fixed-wing UAV — CAD, composites, and flight integration.</p>
    </header>

    <!-- HERO MEDIA: main image -->
    <div class="hero-media">
      <img src="/assets/images/valk/hero.jpg" alt="VALK UAV on launch rail">
    </div>

    <section>
      <h2 class="section-title">Overview</h2>
      <p class="muted">
        VALK is a slow-flying, highly stable fixed-wing UAV designed for long-endurance missions with multiple
        sensor payload options. My role was to take the original 2D airframe drawings into full 3D CAD, operate and service 3d printers, 
        run the CNC work for structural components, assist with composite molding, and later redesign the landing
        gear system from the ground up.
      </p>
    </section>

    <section>
      <h2 class="section-title">My contributions</h2>
      <ul>
        <li>3D CAD development from 2D drawings: airframe structure, internal layout, and mounts.</li>
        <li>CNC programming and machining for cores, tooling, and mold components.</li>
        <li>Composite layups, resin infusion, and mold preparation for key structural parts.</li>
        <li>Redesign of the landing gear to improve practicality and robustness in the field.</li>
        <li>Support with launch and recovery testing, tuning, and test flights.</li>
      </ul>
    </section>

    <section>
      <h2 class="section-title">Technical snapshot</h2>
      <ul>
        <li><strong>Wingspan:</strong> 4.5&nbsp;m</li>
        <li><strong>Length:</strong> 3&nbsp;m</li>
        <li><strong>Maximum sensor payload:</strong> 8&nbsp;kg</li>
        <li><strong>Maximum takeoff weight (MTOW):</strong> 40&nbsp;kg</li>
        <li><strong>Battery mass budget:</strong> up to 5.3&nbsp;kg</li>
        <li><strong>Propulsion:</strong> configurable for electric or internal combustion powerplants</li>
        <li><strong>Endurance target:</strong> approximately 5&nbsp;hours (mission and configuration dependent)</li>
        <li><strong>Navigation / autopilot stack:</strong> ArduPilot on Pixhawk Cube</li>
      </ul>
    </section>

    <section>
      <h2 class="section-title">Media</h2>
      <p class="muted">A short overview video and a few build shots.</p>

      <!-- Main YouTube video -->
      <div class="hero-media">
        <iframe
          src="https://www.youtube.com/embed/7zJk28XQCvc"
          title="VALK UAV overview video"
          allowfullscreen
          loading="lazy">
        </iframe>
      </div>

      <!-- Carousel replacing the 3-image gallery -->
      <div class="carousel" id="valkCarousel">
        <button class="carousel-btn prev" aria-label="Previous image">&#10094;</button>
        <div class="carousel-track">
          <div class="carousel-slide">
            <img
              src="/assets/images/valk/build-1.jpg"
              data-full="/assets/images/valk/build-1.jpg"
              alt="VALK wing and fuselage during composite layup">
          </div>
          <div class="carousel-slide">
            <img
              src="/assets/images/valk/build-2.jpg"
              data-full="/assets/images/valk/build-2.jpg"
              alt="CNC-machined cores and tooling for VALK">
          </div>
          <div class="carousel-slide">
            <img
              src="/assets/images/valk/build-3.jpg"
              data-full="/assets/images/valk/build-3.jpg"
              alt="VALK UAV on the field ready for test flight">
          </div>
          <!-- Add more slides as needed -->
          <!--
          <div class="carousel-slide">
            <img
              src="/assets/images/valk/build-4.jpg"
              data-full="/assets/images/valk/build-4.jpg"
              alt="Additional VALK build detail">
          </div>
          <div class="carousel-slide">
            <img
              src="/assets/images/valk/build-5.jpg"
              data-full="/assets/images/valk/build-5.jpg"
              alt="VALK UAV in flight">
          </div>
          -->
        </div>
        <button class="carousel-btn next" aria-label="Next image">&#10095;</button>
      </div>
      <div class="carousel-dots" id="valkCarouselDots"></div>
    </section>
  </main>

  <footer class="footer">
    © <span id="year"></span> Middleton Makes
  </footer>

  <!-- Lightbox overlay -->
  <div class="lightbox" id="lightbox">
    <img id="lightboxImage" src="" alt="Expanded VALK image">
    <div class="lightbox-hint">Click anywhere or press Esc to close</div>
  </div>

  <script>
    (function(){
      // Footer year
      document.getElementById('year').textContent = new Date().getFullYear();

      // Simple carousel init
      function initCarousel(carouselId, dotsId){
        const carousel = document.getElementById(carouselId);
        if (!carousel) return;

        const track = carousel.querySelector('.carousel-track');
        const slides = Array.from(track.querySelectorAll('.carousel-slide'));
        const prevBtn = carousel.querySelector('.prev');
        const nextBtn = carousel.querySelector('.next');
        const dotsContainer = document.getElementById(dotsId);

        let index = 0;

        // Create dots
        slides.forEach((_, i) => {
          const dot = document.createElement('div');
          dot.className = 'carousel-dot' + (i === 0 ? ' active' : '');
          dot.addEventListener('click', () => {
            index = i;
            update();
          });
          dotsContainer.appendChild(dot);
        });

        const dots = Array.from(dotsContainer.querySelectorAll('.carousel-dot'));

        function update(){
          track.style.transform = 'translateX(' + (-index * 100) + '%)';
          dots.forEach(d => d.classList.remove('active'));
          if (dots[index]) dots[index].classList.add('active');
        }

        nextBtn.addEventListener('click', () => {
          index = (index + 1) % slides.length;
          update();
        });

        prevBtn.addEventListener('click', () => {
          index = (index - 1 + slides.length) % slides.length;
          update();
        });
      }

      initCarousel('valkCarousel', 'valkCarouselDots');

      // Lightbox logic
      const lightbox = document.getElementById('lightbox');
      const lightboxImage = document.getElementById('lightboxImage');

      document.querySelectorAll('#valkCarousel img').forEach(img => {
        img.addEventListener('click', () => {
          const full = img.getAttribute('data-full') || img.src;
          lightboxImage.src = full;
          lightbox.classList.add('open');
        });
      });

      function closeLightbox(){
        lightbox.classList.remove('open');
        lightboxImage.src = '';
      }

      lightbox.addEventListener('click', closeLightbox);
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') closeLightbox();
      });
    })();
  </script>
</body>
</html>
